# ========================================
# Lychee Link Checker Configuration
# Documentation: https://lychee.cli.rs/#/usage/config
# Example: https://github.com/lycheeverse/lychee/blob/master/lychee.example.toml
# ========================================

# ===========================
# Cache Settings
# ===========================

# Enable link caching to avoid checking the same links repeatedly
cache = true

# Discard cached requests older than this duration
max_cache_age = "1d"

# ===========================
# Runtime Configuration
# ===========================

# Maximum number of allowed redirects before giving up
max_redirects = 10

# Maximum number of retries before declaring a link dead
max_retries = 3

# Maximum number of concurrent link checks (uncomment to limit)
max_concurrency = 8

# Timeout for each request in seconds
timeout = 20

# ===========================
# Request Configuration
# ===========================

# User agent string to send with requests
user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36 Edg/120.0.0.0"

# Minimum wait time in seconds between retries
retry_wait_time = 2

# Accepted HTTP status codes for valid links
accept = [
  200,  # OK
  206,  # Partial Content
  429,  # Too Many Requests (rate limiting)
  999,  # LinkedIn anti-scraping
]

# URL schemes to check
scheme = ["https", "http"]

# Custom request headers
headers = [
  "Accept-Encoding: deflate, compress, gzip, br, zstd",
  "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
]

# ===========================
# Exclusion Settings
# ===========================

# Ignore case when matching glob patterns
glob_ignore_case = true

# Network exclusions
exclude_all_private = true
exclude_private = true
exclude_link_local = true
exclude_loopback = true

# Exclude email addresses from checking
exclude_mail = true

# Filesystem paths to exclude
exclude_path = [
  "node_modules",
  ".git",
  ".cache",
  ".claude",
  ".venv",
  "venv",
  "dist",
  "build",
  "coverage",
  "site",
  "docs",
  "CHANGELOG.md",
  "megalinter-reports",
  "megalinter/descriptors/schemas",
  ".automation/generated",
  ".automation/test",
]

# Exclude specific URLs or patterns
exclude = [
  # Local/placeholder URLs
  "https://example.com",
  "http://example.com",
  "https://localhost",
  "http://localhost",
  "https://127.0.0.1",

  # Common rate-limited sites
  "https://twitter.com/*",
  "https://x.com/*",
  "https://www.linkedin.com/*",

  # Repository-specific exclusions (customize as needed)
  "https://github.com/*/archive/*",  # Release archives
]

# ===========================
# Include Settings
# ===========================

# File extensions to check
include = [
  "*.md",
  "*.html",
  "*.htm",
  "*.txt",
]

# ===========================
# Output Configuration
# ===========================

# Verbose output (uncomment for detailed logging)
# verbose = true

# Show progress bar
# progress = true

# Maximum number of errors to show before stopping
# max_errors = 100

